function setDefaultAttributes4Symbols(){for(var e=$("#div8 div .chessSymbols"),o=1;o<=e.length;o++)1===o||8===o?1===o?$(e[o-1]).attr({Type:"ROOK",Team:"BLACK",XPos:"a",YPos:8}):$(e[o-1]).attr({Type:"ROOK",Team:"BLACK",XPos:"h",YPos:8}):2===o||7===o?2===o?$(e[o-1]).attr({Type:"KNIGHT",Team:"BLACK",XPos:"b",YPos:8}):$(e[o-1]).attr({Type:"KNIGHT",Team:"BLACK",XPos:"g",YPos:8}):3===o||6===o?3===o?$(e[o-1]).attr({Type:"BISHOP",Team:"BLACK",XPos:"c",YPos:8}):$(e[o-1]).attr({Type:"BISHOP",Team:"BLACK",XPos:"f",YPos:8}):4===o?$(e[o-1]).attr({Type:"QUEEN",Team:"BLACK",XPos:"d",YPos:8}):$(e[o-1]).attr({Type:"KING",Team:"BLACK",XPos:"e",YPos:8});e=$("#div7 div .chessSymbols");for(var o=1;o<=e.length;o++){var r=["a","b","c","d","e","f","g","h"];$(e[o-1]).attr({Type:"PAWN",Team:"BLACK",XPos:r[o-1],YPos:7})}e=$("#div1 div .chessSymbols");for(var o=1;o<=e.length;o++)1===o||8===o?1===o?$(e[o-1]).attr({Type:"ROOK",Team:"WHITE",XPos:"a",YPos:1}):$(e[o-1]).attr({Type:"ROOK",Team:"WHITE",XPos:"h",YPos:1}):2===o||7===o?2===o?$(e[o-1]).attr({Type:"KNIGHT",Team:"WHITE",XPos:"b",YPos:1}):$(e[o-1]).attr({Type:"KNIGHT",Team:"WHITE",XPos:"g",YPos:1}):3===o||6===o?3===o?$(e[o-1]).attr({Type:"BISHOP",Team:"WHITE",XPos:"c",YPos:1}):$(e[o-1]).attr({Type:"BISHOP",Team:"WHITE",XPos:"f",YPos:1}):4===o?$(e[o-1]).attr({Type:"QUEEN",Team:"WHITE",XPos:"d",YPos:1}):$(e[o-1]).attr({Type:"KING",Team:"WHITE",XPos:"e",YPos:1});e=$("#div2 div .chessSymbols");for(var o=1;o<=e.length;o++){var r=["a","b","c","d","e","f","g","h"];$(e[o-1]).attr({Type:"PAWN",Team:"WHITE",XPos:r[o-1],YPos:2})}}function setDefaultAttributes4Boxes(){for(var e=1;8>=e;e++)for(var o=$("#div"+e+" div.box"),r=0;r<o.length;r++){var a=["a","b","c","d","e","f","g","h"];$(o[r]).attr({XPos:a[r],YPos:e})}}function calculateDPath(e){if("ROOK"===$(e).attr("Type")){var o=convertRealXPos($(e).attr("XPos")),r=parseInt($(e).attr("YPos"));if(o-1!==0){for(var a=o-1;a>0;a--){var t=isHereSomeone(a,r);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(a,r,!0);break}colorMe(a,r,!1)}for(var a=o+1;8>=a;a++){var t=isHereSomeone(a,r);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(a,r,!0);break}colorMe(a,r,!1)}}else for(var a=2;8>=a;a++){var t=isHereSomeone(a,r);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(a,r,!0);break}colorMe(a,r,!1)}if(r-1!==0){for(var a=r-1;a>0;a--){var t=isHereSomeone(o,a);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,a,!0);break}colorMe(o,a,!1)}for(var a=r+1;8>=a;a++){var t=isHereSomeone(o,a);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,a,!0);break}colorMe(o,a,!1)}}else for(var a=2;8>=a;a++){var t=isHereSomeone(o,a);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,a,!0);break}colorMe(o,a,!1)}}else if("KNIGHT"===$(e).attr("Type")){var o=convertRealXPos($(e).attr("XPos")),r=parseInt($(e).attr("YPos"));if(o-2>0){if(9>r+1){var t=isHereSomeone(o-2,r+1);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-2,r+1,!0):colorMe(o-2,r+1,!1)}if(r-1>0){var t=isHereSomeone(o-2,r-1);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-2,r-1,!0):colorMe(o-2,r-1,!1)}}if(o+2>0){if(9>r+1){var t=isHereSomeone(o+2,r+1);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+2,r+1,!0):colorMe(o+2,r+1,!1)}if(r-1>0){var t=isHereSomeone(o+2,r-1);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+2,r-1,!0):colorMe(o+2,r-1,!1)}}if(r-2>0){if(9>o+1){var t=isHereSomeone(o+1,r-2);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+1,r-2,!0):colorMe(o+1,r-2,!1)}if(o-1>0){var t=isHereSomeone(o-1,r-2);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-1,r-2,!0):colorMe(o-1,r-2,!1)}}if(r+2>0){if(9>o+1){var t=isHereSomeone(o+1,r+2);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+1,r+2,!0):colorMe(o+1,r+2,!1)}if(o-1>0){var t=isHereSomeone(o-1,r+2);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-1,r+2,!0):colorMe(o-1,r+2,!1)}}}else if("BISHOP"===$(e).attr("Type")){for(var o=convertRealXPos($(e).attr("XPos")),r=parseInt($(e).attr("YPos")),s=r,i=o+1;8>=i&&(s++,!(s>8));i++){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}s=r;for(var i=o-1;i>=1&&(s++,!(s>8));i--){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}s=r;for(var i=o-1;i>=1&&(s--,!(1>s));i--){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}s=r;for(var i=o+1;8>=i&&(s--,!(1>s));i++){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}}else if("QUEEN"===$(e).attr("Type")){var o=convertRealXPos($(e).attr("XPos")),r=parseInt($(e).attr("YPos"));if(o-1!==0){for(var a=o-1;a>0;a--){var t=isHereSomeone(a,r);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(a,r,!0);break}colorMe(a,r,!1)}for(var a=o+1;8>=a;a++){var t=isHereSomeone(a,r);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(a,r,!0);break}colorMe(a,r,!1)}}else for(var a=2;8>=a;a++){var t=isHereSomeone(a,r);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(a,r,!0);break}colorMe(a,r,!1)}if(r-1!==0){for(var a=r-1;a>0;a--){var t=isHereSomeone(o,a);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,a,!0);break}colorMe(o,a,!1)}for(var a=r+1;8>=a;a++){var t=isHereSomeone(o,a);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,a,!0);break}colorMe(o,a,!1)}}else for(var a=2;8>=a;a++){var t=isHereSomeone(o,a);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,a,!0);break}colorMe(o,a,!1)}for(var s=r,i=o+1;8>=i&&(s++,!(s>8));i++){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}s=r;for(var i=o-1;i>=1&&(s++,!(s>8));i--){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}s=r;for(var i=o-1;i>=1&&(s--,!(1>s));i--){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}s=r;for(var i=o+1;8>=i&&(s--,!(1>s));i++){var t=isHereSomeone(i,s);if(t.is){$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(i,s,!0);break}colorMe(i,s,!1)}}else if("KING"===$(e).attr("Type")){var o=convertRealXPos($(e).attr("XPos")),r=parseInt($(e).attr("YPos"));if(9>r+1){var t=isHereSomeone(o,r+1);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,r+1,!0):colorMe(o,r+1,!1)}if(r-1>0){var t=isHereSomeone(o,r-1);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o,r-1,!0):colorMe(o,r-1,!1)}if(9>o+1){var t=isHereSomeone(o+1,r);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+1,r,!0):colorMe(o+1,r,!1),t=isHereSomeone(o+1,r+1),t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+1,r+1,!0):colorMe(o+1,r+1,!1),t=isHereSomeone(o+1,r-1),t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+1,r-1,!0):colorMe(o+1,r-1,!1)}if(9>o+1){var t=isHereSomeone(o-1,r);t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-1,r,!0):colorMe(o-1,r,!1),t=isHereSomeone(o-1,r+1),t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-1,r+1,!0):colorMe(o-1,r+1,!1),t=isHereSomeone(o-1,r-1),t.is?$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-1,r-1,!0):colorMe(o-1,r-1,!1)}}else{var o=convertRealXPos($(e).attr("XPos")),r=parseInt($(e).attr("YPos"));if(9>r+1){if("WHITE"===$(e).attr("Team")){var t=isHereSomeone(o,r+1);t.is||(colorMe(o,r+1,!1),2===r&&(t=isHereSomeone(o,r+2),t.is||colorMe(o,r+2,!1)))}o-1>0&&(t=isHereSomeone(o-1,r+1),t.is&&$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-1,r+1,!0)),9>o+1&&(t=isHereSomeone(o+1,r+1),t.is&&$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+1,r+1,!0))}if(r-1>0){if("BLACK"===$(e).attr("Team")){var t=isHereSomeone(o,r-1);t.is||(colorMe(o,r-1,!1),7===r&&(t=isHereSomeone(o,r-2),t.is||colorMe(o,r-2,!1)))}o-1>0&&(t=isHereSomeone(o-1,r-1),t.is&&$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o-1,r-1,!0)),9>o+1&&(t=isHereSomeone(o+1,r-1),t.is&&$(t.who).attr("Team")!==$(e).attr("Team")&&colorMe(o+1,r-1,!0))}}}function convertRealXPos(e){switch(e){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8}}function isHereSomeone(e,o){var r=$(".chessSymbols"),a=new Object;a.who=null,a.is=!1;for(var t=0;t<r.length;t++)if(convertRealXPos($(r[t]).attr("XPos"))===e&&parseInt($(r[t]).attr("YPos"))===o)return a.is=!0,a.who=$(r[t]),a;return a}function initializeBoxes(){$("div.higlightedBoxes").droppable("destroy"),$("div.enemyBoxes").droppable("destroy");for(var e=$(".higlightedBoxes"),o=0;o<e.length;o++)$(e[o]).removeClass("higlightedBoxes");e=$(".enemyBoxes");for(var o=0;o<e.length;o++)$(e[o]).removeClass("enemyBoxes");e=$(".colorOwnBox");for(var o=0;o<e.length;o++)$(e[o]).removeClass("colorOwnBox")}function colorMe(e,o,r){for(var a="#div"+o+" div.box",t=$(a),s=0;s<t.length;s++)if(s+1===e){r?$(t[s]).addClass("enemyBoxes"):$(t[s]).addClass("higlightedBoxes");break}}function colorOwn(e){for(var o=convertRealXPos($(e).attr("XPos")),r=parseInt($(e).attr("YPos")),a="#div"+r+" div.box",t=$(a),s=0;s<t.length;s++)if(s+1===o){$(t[s]).addClass("colorOwnBox");break}}$(document).ready(function(){for(var e=document.getElementById("divNums"),o=8;o>=1;o--)e.innerHTML=e.innerHTML+"<div style='line-height:65px;'>"+o+"</div>";for(var e=document.getElementById("divChars"),r=["a","b","c","d","e","f","g","h"],o=1;8>=o;o++)e.innerHTML=e.innerHTML+"<span style='width:65px;display:inline-block;text-align:center'>"+r[o-1]+"</span>"}),$(function(){setDefaultAttributes4Boxes(),setDefaultAttributes4Symbols(),$("div.box").mousedown(function(){for(var e=$(this).attr("XPos"),o=$(this).attr("YPos"),r=$(".chessSymbols"),a=!0,t=0;t<r.length;t++)if($(r[t]).attr("XPos")===e&&$(r[t]).attr("YPos")===o){a=!1;break}a&&initializeBoxes()}),$(".chessSymbols").mousedown(function(){initializeBoxes(),calculateDPath(this),colorOwn(this),$("div.higlightedBoxes").droppable({drop:function(e,o){}}),$("div.enemyBoxes").droppable({drop:function(e,o){}})}),$(".chessSymbols").mouseup(function(){$(this).draggable({revert:function(e){if(e){for(var o=$("div.box"),r=null,a=0;a<o.length;a++){var t=$(this).attr("XPos"),s=$(this).attr("YPos");if($(o[a]).attr("XPos")===t&&$(o[a]).attr("YPos")===s){r=$(o[a]).children().detach();break}}for(var a=0;a<o.length;a++){var t=$(e).attr("XPos"),s=$(e).attr("YPos");if($(o[a]).attr("XPos")===t&&$(o[a]).attr("YPos")===s){$(o[a]).hasClass("enemyBoxes")?($(o[a]).children().fadeOut(1e3),setTimeout(function(){$(o[a]).children().detach(),$(r).css("left",0),$(r).css("top",0),$(o[a]).prepend(r)},1e3)):($(r).css("left",0),$(r).css("top",0),$(o[a]).prepend(r));break}}return $(this).attr("XPos",$(e).attr("XPos")),$(this).attr("YPos",$(e).attr("YPos")),$(this).draggable("destroy"),initializeBoxes(),!1}return!0}})}),$("div.box").hover(function(){})});